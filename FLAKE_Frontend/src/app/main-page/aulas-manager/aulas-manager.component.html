<div class="card">
  <div class="container">
    <button class="new" (click)="toggleFormulario()">New</button>
    <div *ngIf="mostrarFormulario" class="form-container">

        <div class="input-group">
          <label for="grado">Grado</label>
          <input type="text"  [(ngModel)]="nuevoAula.grado" required />
        </div>
        <div class="input-group">
          <label for="gradunum">Grado numero</label>
          <input type="text"  [(ngModel)]="nuevoAula.gradunum" required />
        </div>
        <div class="input-group">
          <label for="grupo">Grupo</label>
          <input type="text"  [(ngModel)]="nuevoAula.grupo" />
        </div>
        <div class="input-group">
          <label for="jornada">Jornada</label>
          <input
            type="text" [(ngModel)]="nuevoAula.jornada" required/>
        </div>
        <div class="input-group">
          <label for="institucion">Institucion</label>
          <input type="text" [(ngModel)]="nuevoAula.institucion" />
        </div>


        <div class="button-container">
          <button type="submit" class="submit-btn" (click)="crearAula()">
            Crear Aula
          </button>
        </div>
      
    </div>
  </div>
  <h1 class="title">Gestión de Aulas</h1>

  <p-toast></p-toast>
  <p-table
    [value]="aulas"
    dataKey="id"
    editMode="row"
    [tableStyle]="{ 'min-width': '50rem' }"
  >
    <ng-template pTemplate="header">
      <tr>
        <th style="width: 20%">Grado</th>
        <th style="width: 20%">Grado numero</th>
        <th style="width: 20%">Grupo</th>
        <th style="width: 20%">Jornada</th>
        <th style="width: 20%">Institución</th>
      </tr>
    </ng-template>
    <ng-template
      pTemplate="body"
      let-aula
      let-editing="editing"
      let-ri="rowIndex"
    >
      @for (aula of aulas; track aula.idaula) {
      <tr [pEditableRow]="aula">
        <td>
          <p-cellEditor>
            <ng-template pTemplate="input">
              <input pInputText type="text" [(ngModel)]="aula.grado" required />
            </ng-template>
            <ng-template pTemplate="output">
              {{ aula.grado }}
            </ng-template>
          </p-cellEditor>
        </td>

        <td>
          <p-cellEditor>
            <ng-template pTemplate="input">
              <input
                pInputText
                type="text"
                [(ngModel)]="aula.gradunum"
                required
              />
            </ng-template>
            <ng-template pTemplate="output">
              {{ aula.gradunum }}
            </ng-template>
          </p-cellEditor>
        </td>

        <td>
          <p-cellEditor>
            <ng-template pTemplate="input">
              <input pInputText type="text" [(ngModel)]="aula.grupo" required />
            </ng-template>
            <ng-template pTemplate="output">
              {{ aula.grupo }}
            </ng-template>
          </p-cellEditor>
        </td>

        <td>
          <p-cellEditor>
            <ng-template pTemplate="input">
              <input
                pInputText
                type="text"
                [(ngModel)]="aula.jornada"
                required
              />
            </ng-template>
            <ng-template pTemplate="output">
              {{ aula.jornada }}
            </ng-template>
          </p-cellEditor>
        </td>

        <td>
          <div class="flex align-items-center justify-content-center gap-2">
            <button
              *ngIf="!editing"
              pButton
              pRipple
              type="button"
              pInitEditableRow
              icon="pi pi-pencil"
              (click)="onRowEditInit(aula)"
              class="p-button-rounded p-button-text"
            ></button>
            <button
                *ngIf="!editing"
                pButton
                pRipple
                type="button"
                icon="pi pi-eraser"
                (click)="onRowEditDelete(aula, ri)"
                class="p-button-rounded p-button-text"
              ></button>
            <button
              *ngIf="editing"
              pButton
              pRipple
              type="button"
              pSaveEditableRow
              icon="pi pi-check"
              (click)="onRowEditSave(aula)"
              class="p-button-rounded p-button-text p-button-success mr-2"
            ></button>
            <button
              *ngIf="editing"
              pButton
              pRipple
              type="button"
              pCancelEditableRow
              icon="pi pi-times"
              (click)="onRowEditCancel(aula, $index)"
              class="p-button-rounded p-button-text p-button-danger"
            ></button>
          </div>
        </td>
      </tr>
      }
    </ng-template>
  </p-table>
</div>
